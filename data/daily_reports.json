[
  {
    "date": "2026-02-16",
    "content": "# 2026-02-16 メモ\n\n## 日報（2/15分）\n- **[REDACTED]\n- Google Sheets日報書き込み不可 → ローカル記録+Discord報告に切り替え\n\n### 2/15 サマリー\n- **100ペア大規模スキャン完了**: 50,801テスト、9/100ペア両年プラス\n  - TOP: ZEC(+1204%), TRX(+193%), BCH(+163%), BNB(+163%)\n- **CCIバグ発見・修正**: pandas_ta CCI値が壊れていた → 手動計算に置換\n  - 旧結果: 2024+124.8%/2025+33.8% → 修正後: 2024+100.3%/2025-7.6%\n- **Grid戦略バックテスト成功**: 20,160テスト、日利+1.05%（レバなし）\n- **マルチエージェント体制完成**: Talon/Velvet自律稼働\n- **Googleアカウント oc.hikarimaru BAN** → 新アカウント oc.clawdia@gmail.com\n- **GitHub移行**: oc-clawdia → oc-clawdia-dev\n- **ダッシュボードV3.1**: タブUI、タスク管理、15分自動更新\n- **Grid Botバグ修正**: sell全残高→買った量だけに修正\n- **データアーキテクチャ刷新**: tracker.py共通化、portfolio_recorder.py追加\n\n### 稼働状況\n- ライブBot: PID 43758 稼働中\n- Talon/Velvetサブゲートウェイ稼働中\n\n### TODO\n- Maton API再接続（新Googleアカウントで）\n- Binanceアカウント開設（hikarimaru待ち）\n- メタ戦略は全滅確認済み、CCI単体+銘柄選別が最適解"
  },
  {
    "date": "2026-02-15",
    "content": "# 2026-02-15 メモ\n\n## 日報\n- 24:00 日報作成完了 → Google Sheets「2026-02-15」タブ\n- ライブBot稼働中、取引なし（CCI=+37、買い条件未達）\n- BTC: $69,739、Donchian Low: $68,730\n- ベア相場バックテスト実行中 (PID 8171)\n\n## 稼働中\n- ライブBot: PID 8313 (PIDロック実装済み、重複解消)\n- 100ペアスキャン: PID 8445 — 72,000テスト、7-8AM完了予定\n- ミームモニター: PID 3829\n\n## 深夜〜早朝の進捗\n- Bot重複プロセス整理完了 — PIDロック実装、3重複kill\n- Discord avatar更新（黒猫シルバーアイ）\n- Google Drive全ドキュメント同期完了（8ドキュメント+3スプレッドシート）\n- GitHub force-push完了\n- pandas_ta CCIバグ発見 → 手動CCI実装で対応\n- 10分間隔cronレポート再設定（ID: b5c8f6b6）— hikarimaruからレポート漏れ指摘あり\n- 100ペアスキャン開始（0:47時点で5/100ペア完了）\n- hikarimaru承認: 上位5ペアはライブ自動開始OK（0:12 JST）\n\n## 100ペアスキャン結果 (8:00完了)\n- 62ペアテスト済み（38ペアは2024データ不足）\n- **両年プラス: 8ペア**\n- #1 ZEC: +1204.7% (2025の10倍急騰が原因、再現性低)\n- #2 TRX: +193.0% ✅ DD33.4%最小、安定\n- #3 BCH: +163.3% ✅ 2025も+32%\n- #4 BNB: +163.0% ✅ 勝率最高40.6%\n- #5 WBTC: +119.3% (BTCと同じ、不要)\n- #6 ETH: +69.7% (WR3.2%で危険)\n- #7 PAXG: +61.7% (DD21.4%最小、安全資産枠)\n- #8 DASH: +47.4% (DD74%で不採用)\n- ドキュメント: docs/100PAIRS_SCAN_RESULTS.md\n\n## マルチペアBot改修\n- TRX/BNB/BCHをライブBotに追加（hikarimaru承認）\n- サブエージェントで改修中\n- 各ペア独自パラメータ、状態独立管理\n\n## 重要決定\n- cronレポート10分間隔に変更（heartbeatだとmainセッション競合で漏れる）\n- 深夜タスク保留は絶対禁止（hikarimaru明示指示）\n- 100ペアスキャン後 → 上位ペアライブ開始（事前承認済み）\n- ZECは宝くじ枠としてのみ（メインにはしない）\n- TRX/BNB/BCHの3ペア追加決定\n\n## 100ペアスキャン完了 (09:20)\n- 50,801テスト、100ペア完了\n- 両年プラス: 9/100ペアのみ\n- TOP5: ZEC(+1204%), TRX(+193%), BCH(+163%), BNB(+163%), OG(+134%)\n- PAXG: Sharpe1.40, DD21%で最安定\n- スキャナー途中停止 → レジューム機能追加して復旧（pairs_scanner.py修正）\n- 各ペア最適パラメータは100pairs_ranking.jsonに保存\n\n## 10:15 マルチエージェント体制完成\n- Talon/Velvet サブゲートウェイ完全自律動作確認\n- `channels unresolved` は起動時ログのみ、その後正常にresolve\n- 重複メッセージ原因: Clawdiaがcurlで代弁 + 本人が自動返信 → 今後curlで代弁しない\n- 指揮系統: hikarimaru > Clawdia > 各自判断 → SOUL.mdに記録済み\n- launchd設定: OPENCLAW_CONFIG_PATH + OPENCLAW_STATE_DIR 明示設定\n- 時間足スキャン: 1400/3600 (39%)\n\n## 10:40 セキュリティ対応\n- clawdia-dashboardリポをprivate化（Maton APIキーが公開されていた）\n- Talonトークンをハードコードから環境変数化\n- Maton APIキーはgit historyに残る → ローテーション推奨\n- **教訓**: 秘密情報は必ず環境変数から読む。GitHubにpush前にgrep確認必須。\n- **教訓**: GitHub Pagesを使うためにpublic化する場合、秘密情報が含まれていないか必ず確認\n- **教訓**: CPUに余裕があれば最初から並列化する（目標70-80%使用率）\n\n## 10:40 日報運用改善\n- 翌日分の日報テンプレートを事前作成、タスク中に都度記載する運用に変更\n- セッションが長くなっても記録が残るように\n\n## ダッシュボード大改修（午前〜午後）\n\n### Google アカウントBAN\n- oc.hikarimaru@gmail.com が2026/02/15にBAN（bot検知）\n- 原因: ブラウザ自動操作（Discord認証メールクリック、hCaptcha CDP操作）がGoogle検知\n- 新アカウント: **oc.clawdia@gmail.com** / oc19980216\n- Chromeログイン切り替え完了\n- Maton API環境変数削除（~/.zshrcから）\n- **教訓: Googleログイン中のブラウザで自動操作は絶対禁止**\n\n### ダッシュボード V1→V3.1\n- V2: Google Sheets廃止→ローカルJSONLベース、フィルタ+CSVエクスポート\n- V2.1: WBTC/BNB残高表示追加\n- V2.2: バグ修正5件+タスク/日報セクション追加\n- V3: タブUI（概要/タスク/トレード/シグナル/日報）\n- V3.1: プロジェクト階層タスク管理、フィルタ、詳細モーダル\n- **subagentとの同時編集でコンフリクト多発** → 重要な教訓: ダッシュボードUIはsubagentに全面書き換えさせると壊れる。細かいバグ修正は自分でやる方が速い\n- データフィールド名不一致が主な原因（wallet.total_usd vs total_balance_usd、signal.checked_at vs timestamp）\n\n### タスク管理システム\n- tasks.json: プロジェクト→タスク→サブタスク階層（無限ネスト）\n- メンバー: 👑hikarimaru(owner), 🩶clawdia(manager), 🦅talon(agent), 🌙velvet(agent)\n- hikarimaruの確認待ちタスクをフラットリスト表示する機能追加\n- HEARTBEAT.mdをタスク駆動型に書き換え\n\n### ライブBot\n- 10:44 WBTC $20購入（CCIシグナル）— 底値で掴めた！\n- Discord通知が来なかった原因: TALON_BOT_TOKEN環境変数がBot起動時に未設定\n- Bot再起動で解決\n- signal_logger.pyにpairフィールド追加（マルチペア対応）\n\n### 15分自動更新\n- launchd: com.clawdia.dashboard-update.plist\n- update_data.py → git add → git commit → git push → GitHub Pages自動反映\n\n### 現在のプロジェクト（3件）\n- P001: CCI自動売買Bot（タスク4件）\n- P002: ミームコイン探索（タスク1件）  \n- P003: インフラ・ツール（タスク6件）\n\n## 午後の進捗 (12:00〜14:39)\n\n### hikarimaru参照バックテストツール分析\n- `reference/backtest-tool/claudecode/` を分析 → `reference/ANALYSIS.md` 作成\n- hikarimaruの独自ツールとClawdiaのエンジンの差異を比較\n\n### BNB CCIパラメータ最適化\n- 240パターンバックテスト実行\n- 最適: CCI(-130)/SL1.5%/Don20 → 2025: +4.7%\n- live_trader.pyのBNBパラメータ更新済み\n\n### Bollinger+RSI+Trend戦略開発\n- entry_logics.py/exit_logics.pyにBollinger戦略追加\n- BTCバックテスト: 最適 BB(15,1.5)+EMA(10,50)+RSI(10)>75 → 2024:+102.3%, 2025:+6.8%\n- マルチアセット: BNB 2024:+48.9%/2025:+16.0%, ETH 2024:+36.0%/2025:+8.2%\n- 30パラメータ精密最適化完了\n- BTCUSDT_BB としてlive_trader.pyに追加（enabled=False、承認待ち）\n\n### メタ戦略（CCI↔Bollinger切替）\n- subagentに依頼して `bot/backtest/meta_engine.py`, `bot/backtest/switching.py` 作成\n- **⚠️ subagentが結果ファイル未生成のまま完了報告** — API名も不正確\n- 実際のクラス: StrategyComponent, MetaBacktestEngine.run_meta_backtest(), SwitchingRule\n- 手動でバックテスト実行が必要（次のタスク）\n\n### Talon規律問題\n- Talonが#generalに投稿していた → #traderのみに制限するよう指示\n- Maton API廃止をTalonに通達\n\n### 重要な教訓\n- **subagentの結果は必ず検証する** — コード生成はできるが結果生成を省略することがある\n- **hikarimaru自律権限付与**: データに基づく決定はClawdiaが独自に下してOK\n\n## 午後の進捗2 (14:39〜16:00)\n\n### メタ戦略バックテスト完了\n- 11パターン × 2年 = 22テスト、自分で実行\n- **結論: CCI単体が最強、メタ戦略は全滅**（全て2025年マイナス）\n- 切替が多いほど悪化、Bollinger自体が弱い\n- docs/META_STRATEGY_RESULTS.md 作成\n\n### pandas_ta CCIバグ修正 ⚠️ 重大\n- **CCIEntryがpandas_taを使っていた → 値のスケールが完全に壊れていた**\n- pandas_ta CCI: ±100,000（異常）vs Manual CCI: ±500（正常）\n- 以前の結果は嘘: 2024 +124.8%→**+100.3%**, 2025 +33.8%→**-7.6%**\n- CCIEntryを手動計算に置換完了\n- **全てのバックテスト結果の信頼性に影響する重大バグだった**\n\n### トレンドフィルター（EMA）実装\n- 4年バックテスト: BTC CCI+EMA50が最強（累積+186% vs ベースライン+56%）\n- **マルチ銘柄テストで銘柄別に最適が異なることを発見:**\n  - BTC: EMA50フィルターが改善\n  - BNB: フィルターなしが最強（入れると悪化）\n  - ETH: CCI自体が効かない\n- ライブBot: 銘柄別にフィルター設定（BTC=EMA50, BNB=なし）\n\n### 新ルール追加（hikarimaru指示）\n- **コード完成→即実行。承認不要なものは待たない** — アイドル厳禁\n- **タスク着手時は必ず報告**: タスクID、目安時間、完了後の予定\n- **バックテストは必ず複数銘柄+既存有力ロジック比較で回す**\n- **subagentは品質低い→重要タスクはClawdia自身が実行**\n\n### ダッシュボード: 戦略タブ追加\n- 「🎯 戦略」タブ追加、銘柄別パラメータ一覧表示\n- commit 385b40b → GitHub Pages反映済み\n- update_data.pyにstrategies.json生成追加\n\n### 短期取引プロジェクト P004（hikarimaru依頼）\n- **要件**: $100予算、1日10+取引、5-10%/日、18時までにライブ開始\n- **5分足バックテスト3回実施（合計2000+テスト）**:\n  1. v1: 480テスト全滅（手数料0.1%/片道が高すぎた）\n  2. v2: 840テスト、手数料0.05%でも全戦略マイナス\n  3. v3: 厳格複合条件（RSI+BB+出来高+トレンド）で再テスト\n- **唯一の候補: ETH ブレイクアウト(20bar+出来高2x+ATR超)+TP1.5%/SL0.5%**\n  - 3/5期間プラス、avg +0.19%/月、tpd=1.9\n  - ただし1日2回未満（10回に全然届かない）\n- **結論: DEXロングオンリー5分足で1日10+取引は不可能**\n- hikarimaruに代替案提案中（Binance先物 or 低頻度でもプラスの戦略）\n\n### 技術メモ\n- 5分足10万本のバックテストは重い（1テスト1秒、メモリ200MB）\n- nohupプロセスが何度も死んだ（SIGKILLだがOOMではなく原因不明）\n- gc.collect()とdel df_fullで安定化\n- BacktestEngine.run()のequity_curveが大量メモリ消費の原因かも\n\n---\n\n## 夕方〜（18:00〜）\n\n### P004 短期トレーディング進捗\n- **Grid trading backtest完了** — 9,720テスト、TOP20全てwalk-forward通過（初！）\n- ETH grid=0.1% 3-level TP=0.2% SL=0.3% lev=5xが最良\n- ただしレバ1xだと日利<0.1%で非実用的 → Binance Futures必須\n- **Binance Futures bot作成済み** — `bot/binance_client.py`, `bot/grid_trader.py`\n- hikarimaruがBinanceアカウント開設承認（「OK!! バイナンス進めちゃって欲しい!!!」）\n- P004-T004（Binanceアカウント開設）をhikarimaruに割当、P004-T005（Jupiter/Solanaグリッド）を自分で進行中\n\n### EV分析\n- 131 indicator-bins with 5%+ edge発見\n- ATR%最強（BTC低ATR → 89.9%勝率 for ±1%）\n- walk-forwardはlong不安定、shortやや安定\n\n### リサーチ\n- `docs/TRADING_BOT_RESEARCH.md` 作成 — r/algotrading成功事例、Hummingbot Grid Strike、prediction market arb等\n- 日利目標を3%→0.3%に修正（年利+109%、現実的）\n- hikarimaru同意済み\n\n### Jupiter/Solanaグリッド戦略の課題\n- レバなし・ロングのみ・手数料0.1-0.3% → 日利0.3%達成は困難\n- CCI+グリッドハイブリッドや広幅グリッド等のクリエイティブなアプローチが必要\n- Binance口座開設待ちの間にできることを模索中\n\n### コンパクション4回目\n- セッション92%使用で自動コンパクション\n- 12万テスト超の累計実績\n\n### Jupiter/Solanaグリッド戦略バックテスト（18:08-18:30）\n- 20,160テスト（3,360 configs × 3 pairs × 2 years）\n- **Walk-forward通過: 8,152/10,080 (80.9%)**\n- **日利0.3%達成: 2,154件**\n- **TOP: gs=0.3% levels=3 TP=1.0% SL=0.5%（フィルタなし）**\n  - BTC日利+0.58%, BNB日利+0.93%, ETH日利+1.64%（3ペア平均+1.05%）\n- レバなし・ロングのみ・Jupiter手数料0.3%/往復込み\n- 注意: トレード頻度高い（1日9-23回）、ガス代で$100未満は微妙\n- 注意: ベア相場未検証、1hバーシミュレーション\n- CCI戦略よりはるかに良い結果（CCI 2025: -7.6% vs グリッド +200%+）\n\n### GitHub push完了（18:07）\n- bot/ 57ファイル、commit 8dd0ffd (force push)\n\n### GitHub移行（18:30頃）\n- 旧oc-clawdia（oc.hikarimaru@gmail.com BAN）→ 新oc-clawdia-dev（oc.clawdia@gmail.com）\n- PAT: [REDACTED] (expires 2026-03-17)\n- trading-bot(private) + clawdia-dashboard(public) 両方移行完了\n- GitHub Pages再有効化、ダッシュボード正常動作確認\n\n### サブゲートウェイ調査（19:00頃）\n- Talon/Velvetプロセスは生きている（PID 15586/15587、ポート応答あり）\n- しかしログディレクトリが空 → LaunchAgentのstdout/stderrログ確認が次ステップ\n- `openclaw status`はメインゲートウェイにしか接続できない\n\n### ダッシュボード修正\n- notes.map()バグ修正（string型notesでクラッシュ→Array.isArray()チェック追加）\n- キャッシュバスティング追加（dashboard.js?v=20260215b）\n\n### ライブBot状態\n- PID 33208、3時間以上安定稼働中\n- BTC CCI=+57（買い条件未達）、BNB CCI=-94（閾値-130未達）\n- WBTC $20.01ポジション保持中\n\n## 夜の大改修 (21:30〜23:10)\n\n### データアーキテクチャ全面刷新\n- **tracker.py**: 全戦略共通のトレードレコーダーに書き換え（strategy, direction, 前後残高, スリッページ等全記録）\n- **portfolio_recorder.py**: 30分ごとのスナップショット自動記録（launchd）、latest_snapshot.json書き出し\n- **prices_YYYY-MM-DD.jsonl**: 価格履歴も自動記録\n- **new_trade_trigger.json**: 取引発生時のTalon通知トリガー\n- **ダッシュボード**: latest_snapshot.json優先参照（RPC直接クエリはフォールバックのみ）\n- **jupiter.py**: execute_swapがdict返却に変更（signature, order amounts, swap_type, latency全部含む）\n\n### Grid Botの致命的バグ修正\n- sellが「全SOL残高 - ガス代」を売ってた → 買った量(token_amount)だけ売るように修正\n- ガス代SOL $3分が食われてた（hikarimaruがPhantomスクショで発見）\n\n### CCI Bot修正\n- import time 追加忘れ → 修正\n- BNB追加買い（CCI=-282でシグナル発動）→ time error でstate未更新 → 手動復旧\n- interval=300は「分」単位（5時間）だった → --interval 5（5分）に修正\n\n### サブゲートウェイ復旧\n- remote.token追加で接続できるように\n- Talon cron更新: 6h→毎時のDB参照型レポート\n- Talon取引通知cron新規追加: 5分ごとにtriggerファイル監視\n- Velvetは6個のcronジョブ稼働中\n\n### 教訓（最重要）\n- **AIがデータに手を入れてはいけない** — Botが記録、AIは参照のみ\n- **全戦略が共通の1つのlog_trade()を使う** — 独自ログ厳禁\n- **sellは買った量だけ** — ウォレット全残高を売ってはいけない\n- **execute_swapの結果は詳細に返す** — signatureだけでなく全情報"
  },
  {
    "date": "2026-02-14",
    "content": "# 2026-02-14 メモ\n\n## 重要イベント\n- ライブBot (CCI戦略) 初稼働開始！ PID 8066\n- hikarimaruが500 USDC入金\n- GitHubリポジトリ作成 (oc-clawdia/trading-bot, private)\n- Google Drive全ドキュメント同期完了\n- 日報システム構築（Google Sheets + 24時cron）\n\n## バックテスト結果\n- Adaptive D+B (21件): 固定CCI最強を再確認\n- CCIアレンジ20パターン: ベースライン超えゼロ\n- マルチペア (108件): BTC以外は2025年マイナス\n- 段階エントリー (90件): 一括の方が強い\n- SL精密最適化 (124件): SL=0.9%が最適\n- ベア相場検証 (108件): 実行中...\n\n## パラメータ確定\n- CCI(14) × SL_0.9% + Donchian(15) 1h\n\n## hikarimaruフィードバック\n- ドキュメントは日本語で\n- パラメータはキリのいい数字じゃなく最適値を出す\n- トレード記録は全取引・手数料含めてシート可視化\n- ライブBot監視体制を重視\n- 毎日24時に日報\n- マルチペア＋段階エントリーは方針に追加（段階は不採用に）\n- 就寝時間25:00〜7:00を覚えること\n- レポートルール: タスク中5分刻み、アイドル時は毎時00分\n\n## 稼働中\n- ライブBot: PID 8066, CCI(14) × SL_0.9% + Don(15), 20%ルール\n- cronジョブ: dia-5min-report, daily-report (24:00)"
  }
]